{% extends "base.html" %}
{% block content %}

    <ul class="collapsible">
        {% for recipe in recipes %}
            <li>
                <div class="collapsible-header white-text teal lighten-1 text-shadow">
                    <i class="fa-solid fa-caret-down prefix"></i>
                    <strong>{{ recipe.recipe_name|title }}</strong>
                </div>
                <div class="collapsible-body">
                    <div class="recipe-container row">
                        {% if 'recipe_img' in recipe and 'src' in recipe['recipe_img'] and recipe['recipe_img']['src'] != '' %}
                            <div class="col s12 m5 l4 center-align">
                                <img class="recipe-img" src="{{ recipe.recipe_img.src }}"
                                    alt="Image of '{{ recipe.recipe_name|title }}' recipe."
                                    title="Image of '{{ recipe.recipe_name|title }}' recipe.">
                            </div>
                        {% endif %}
                        <div class="col s12 m7 l8">
                            <p>{{ recipe.recipe_desc }}</p>
                            <ul>
                                <li>
                                    <i class="fa-solid fa-bowl-food"></i>
                                    <strong>Meal Type: </strong>{{ recipe.meal_type|title }}
                                </li>
                                <li>
                                    <i class="fa-regular fa-clock"></i>
                                    <strong>Ready In: </strong>
                                    {{ recipe.ready_in.hours }} Hrs {{ recipe.ready_in.minutes }} Mins
                                </li>
                                <li>
                                    <i class="fa-solid fa-users"></i>
                                    <strong>Serves: </strong>{{ recipe.serves }}
                                </li>
                                <li>
                                    <i class="fa-regular fa-face-smile"></i>
                                    <strong>Created By: </strong>Chef {{ recipe.created_by }}
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="row collapsible-buttons">
                        <div class="col s5 left-align">
                            <a href="{{ url_for('view_recipe', recipe_id=recipe._id) }}" class="waves-effect waves-light btn-small">
                                Full Recipe
                                <i class="fa-solid fa-book"></i>
                            <a>
                        </div>
                        {% if session.user|lower == recipe.created_by|lower %}
                            <div class="col s7 right-align">
                                <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}" class="waves-effect waves-light btn-small right-align grey">
                                    Edit
                                    <i class="fa-solid fa-pen-to-square"></i>
                                </a>
                                <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}" class="waves-effect waves-light btn-small right-align red">
                                    Delete
                                    <i class="fa-solid fa-trash-can"></i>
                                </a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </li>
        {% endfor %}
    </ul>

{% endblock %}